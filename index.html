<script>
    // Perbaikan fungsi render untuk teks yang lebih humanis & seimbang
    function renderResults(data) {
        document.getElementById('results').classList.remove('hidden');
        
        // Font Summary lebih pas (text-lg)
        const summaryBox = document.getElementById('summaryText');
        summaryBox.className = "text-lg font-medium leading-relaxed text-slate-400 italic";
        summaryBox.innerText = data.executiveSummary;
        
        const grid = document.getElementById('auditGrid');
        grid.innerHTML = '';

        const titles = { 
            uiux: "User Experience (UX Laws)", 
            wcag: "Accessibility (WCAG 2.1)", 
            seo: "Search Engine Optimization", 
            performance: "Core Web Vitals", 
            security: "Security & Infrastructure" 
        };

        Object.keys(data.audits).forEach(key => {
            const item = data.audits[key];
            const card = `
            <div class="glass p-6 audit-card border border-white/5 bg-slate-900/50">
                <div class="flex justify-between items-center mb-6">
                    <h4 class="text-xs font-bold uppercase tracking-[0.2em] text-blue-500">${titles[key] || key}</h4>
                    <div class="text-2xl font-black">${item.score}%</div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="space-y-3">
                        <span class="text-[9px] font-black text-green-500 bg-green-500/10 px-2 py-1 rounded">PASSED</span>
                        <ul class="text-xs space-y-2 opacity-60">${item.pass.map(p => `<li>â€¢ ${p}</li>`).join('')}</ul>
                    </div>
                    <div class="space-y-3 border-l border-white/5 pl-4">
                        <span class="text-[9px] font-black text-yellow-500 bg-yellow-500/10 px-2 py-1 rounded">OPTIMIZE</span>
                        <ul class="text-xs space-y-3">${item.optimize.map(o => `<li><b class="text-yellow-500/80">${o.issue}:</b> <span class="opacity-60">${o.solution}</span></li>`).join('')}</ul>
                    </div>
                    <div class="space-y-3 border-l border-white/5 pl-4">
                        <span class="text-[9px] font-black text-red-500 bg-red-500/10 px-2 py-1 rounded">CRITICAL</span>
                        <ul class="text-xs space-y-3">${item.fail.map(f => `<li><b class="text-red-500/80">${f.issue}:</b> <span class="opacity-60">${f.solution}</span></li>`).join('')}</ul>
                    </div>
                </div>
            </div>`;
            grid.innerHTML += card;
        });
    }

    // PDF Generator yang lebih kuat
    function downloadPDF() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        doc.setFont("helvetica", "bold");
        doc.text("DOLPHIN STUDIO - AUDIT REPORT", 10, 20);
        doc.setFont("helvetica", "normal");
        doc.setFontSize(10);
        doc.text("--------------------------------------------------", 10, 25);
        const splitText = doc.splitTextToSize(document.getElementById('summaryText').innerText, 180);
        doc.text(splitText, 10, 35);
        doc.save("Dolphin_Expert_Report.pdf");
    }
</script>
